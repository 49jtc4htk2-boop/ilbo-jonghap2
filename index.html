<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>일일 전도 활동 종합 계산기</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 10px; }
h2 { text-align: center; margin-bottom: 10px; }
textarea { width: 100%; height: 250px; font-size: 16px; padding: 10px; margin-bottom: 10px; resize: vertical; }
button { width: 100%; font-size: 16px; padding: 10px; margin: 5px 0; cursor: pointer; border: none; border-radius: 5px; background: #4CAF50; color: white; }
button:hover { background: #45a049; }
#result { margin-top: 10px; font-weight: bold; font-size: 18px; background: #fff; padding: 10px; border-radius: 5px; word-break: break-word; }
</style>
</head>
<body>

<h2>일일 전도 활동 종합 계산기</h2>

<textarea id="inputText" placeholder="일보 텍스트를 여기에 붙여넣기"></textarea>
<button id="calculateBtn">종합하기</button>
<div id="result"></div>
<button id="copyBtn">결과 복사</button>

<script>
document.getElementById('calculateBtn').addEventListener('click', function() {
    const text = document.getElementById('inputText').value;
    const numbers = [0,0,0,0,0,0,0,0]; // 8개 항목

    const lines = text.split(/\r?\n/);

    lines.forEach(line => {
        if(!line.match(/^\d+\//)) return; // 숫자로 시작하는 줄만
        const parts = line.split('/');
        for(let i=2; i<=9; i++){ // 3~10번째 항목
            if(parts[i]){
                // / 바로 옆 숫자만, 괄호 안 숫자 무시
                const match = parts[i].trim().match(/^(\d+(\.\d+)?)/);
                if(match){
                    let value = parseFloat(match[0]);
                    numbers[i-2] += value;
                }
            }
        }
    });

    // 소수점 처리
    // 단계향상 만남: index 4 → 그대로 합산 (0이면 0)
    numbers[4] = Math.floor(numbers[4]); 
    // 상담따기: index 5 → 반올림
    numbers[5] = Math.round(numbers[5]); 
    // 나머지 항목: 정수화
    for(let i=0;i<numbers.length;i++){
        if(i!==4 && i!==5){
            numbers[i] = Math.round(numbers[i]);
        }
    }

    document.getElementById('result').innerText = '종합/' + numbers.join('/');
});

document.getElementById('copyBtn').addEventListener('click', function() {
    const result = document.getElementById('result').innerText;
    navigator.clipboard.writeText(result).then(() => {
        alert('결과가 클립보드에 복사되었습니다!');
    });
});
</script>

</body>
</html>
