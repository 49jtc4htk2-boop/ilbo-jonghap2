<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì¼ì¼ ì „ë„ í™œë™ ë³´ê³  ì¢…í•©</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; }
textarea { width: 100%; height: 250px; font-family: monospace; margin-bottom: 10px; }
button { padding: 10px 20px; margin-bottom: 20px; }
pre { background: #f0f0f0; padding: 10px; white-space: pre-wrap; }
.error { color: red; font-weight: bold; }
</style>
</head>
<body>

<h2>ğŸŒ³ ì¼ì¼ ì „ë„ í™œë™ ë³´ê³  ì¢…í•© ğŸŒ³</h2>

<p>ì—¬ê¸°ì— ë³´ê³  ë°ì´í„°ë¥¼ ë¶™ì—¬ë„£ê³  "ê³„ì‚°" ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.</p>
<textarea id="inputData" placeholder="ì—¬ê¸°ì— ë³´ê³  ë°ì´í„°ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”"></textarea>
<br>
<button onclick="calculate()">ê³„ì‚°</button>

<h3>ì¢…í•© ê²°ê³¼</h3>
<pre id="output"></pre>

<script>
function calculate() {
    const input = document.getElementById('inputData').value.trim();
    const output = document.getElementById('output');
    output.textContent = '';

    if(!input) {
        output.textContent = 'ë°ì´í„°ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
        return;
    }

    const lines = input.split('\n').filter(l => l.trim() !== '');
    const dataLines = lines.slice(2, lines.findIndex(l => l.startsWith('ì¢…í•©'))); // êµ¬ì—­ ë°ì´í„°
    const results = [];
    let ì¢…í•© = {ì„­ì™¸ìë³´ìœ :0, ë‹¹ì¼ì°¾ê¸°:0, ë‹¹ì¼ì„­ì™¸:0, ë‹¹ì¼ë§Œë‚¨:0, ë‹¨ê³„í–¥ìƒ:0, ìƒë‹´:0, ë§ì”€:0, ì„¼í„°:0};
    const ì´ë¦„ì¹¸ = {}; // ì¤‘ë³µ ì²´í¬

    const ì¹¸ì´ë¦„ = ['ì„­ì™¸ìë³´ìœ ','ë‹¹ì¼ì°¾ê¸°','ë‹¹ì¼ì„­ì™¸','ë‹¹ì¼ë§Œë‚¨','ë‹¨ê³„í–¥ìƒ','ìƒë‹´','ë§ì”€','ì„¼í„°'];

    for(const line of dataLines) {
        const parts = line.split('/');
        const êµ¬ì—­ = parts[0];
        const êµ¬ì—­ì¥ = parts[1];
        const ì¹¸ë°ì´í„° = parts.slice(2);

        if(ì¹¸ë°ì´í„°.length < 8) {
            results.push(`Aêµ¬ì—­ ì¹¸ ê°œìˆ˜ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.`);
            continue;
        }

        ì¹¸ë°ì´í„°.forEach((ì¹¸, idx) => {
            // ì„­ì™¸ìë³´ìœ ëŠ” ê´„í˜¸ ë¬´ì‹œ, ìˆ«ìë§Œ í•©ì‚°
            let sum = 0;
            const names = [];
            if(idx === 0) { // ì„­ì™¸ìë³´ìœ 
                const num = parseFloat(ì¹¸.split('(')[0]) || 0;
                sum = num;
                ì¢…í•©['ì„­ì™¸ìë³´ìœ '] += sum;
            } else {
                // ìˆ«ì ì¶”ì¶œ
                const regex = /([0-9]+(?:\.5)?)/g;
                const matches = ì¹¸.match(regex);
                if(matches) {
                    sum = matches.reduce((a,b)=>a+parseFloat(b),0);
                    switch(idx) {
                        case 1: ì¢…í•©['ë‹¹ì¼ì°¾ê¸°'] += sum; break;
                        case 2: ì¢…í•©['ë‹¹ì¼ì„­ì™¸'] += sum; break;
                        case 3: ì¢…í•©['ë‹¹ì¼ë§Œë‚¨'] += sum; break;
                        case 4: ì¢…í•©['ë‹¨ê³„í–¥ìƒ'] += sum; break;
                        case 5: ì¢…í•©['ìƒë‹´'] += sum; break;
                        case 6: ì¢…í•©['ë§ì”€'] += sum; break;
                        case 7: ì¢…í•©['ì„¼í„°'] += sum; break;
                    }
                }
                // ì´ë¦„ ì¶”ì¶œ(.5 í¬í•¨)
                const nameRegex = /([ê°€-í£]+)(?:\.5)?/g;
                let m;
                while((m = nameRegex.exec(ì¹¸)) !== null){
                    const name = m[1];
                    if(!ì´ë¦„ì¹¸[name]) ì´ë¦„ì¹¸[name] = [];
                    ì´ë¦„ì¹¸[name].push({êµ¬ì—­: êµ¬ì—­, ì¹¸: ì¹¸ì´ë¦„[idx]});
                }
            }
        });
    }

    // ì¤‘ë³µ ì²´í¬
    const ì¤‘ë³µì˜¤ë¥˜ = [];
    for(const [name, occurrences] of Object.entries(ì´ë¦„ì¹¸)) {
        for(let i=0;i<occurrences.length;i++){
            for(let j=i+1;j<occurrences.length;j++){
                const a = occurrences[i];
                const b = occurrences[j];
                if(a.êµ¬ì—­ === b.êµ¬ì—­){
                    // ê°™ì€ êµ¬ì—­ ë‚´ ë‹¹ì¼ì°¾ê¸° vs ë‹¹ì¼ì„­ì™¸ëŠ” í—ˆìš©
                    if((a.ì¹¸==='ë‹¹ì¼ì°¾ê¸°' && b.ì¹¸==='ë‹¹ì¼ì„­ì™¸') || (a.ì¹¸==='ë‹¹ì¼ì„­ì™¸' && b.ì¹¸==='ë‹¹ì¼ì°¾ê¸°')) continue;
                    ì¤‘ë³µì˜¤ë¥˜.push(`${name}, ${a.êµ¬ì—­}(${a.ì¹¸}) vs ${b.êµ¬ì—­}(${b.ì¹¸})`);
                } else {
                    if(a.ì¹¸ !== b.ì¹¸) ì¤‘ë³µì˜¤ë¥˜.push(`${name}, ${a.êµ¬ì—­}(${a.ì¹¸}) vs ${b.êµ¬ì—­}(${b.ì¹¸})`);
                }
            }
        }
    }

    // ê²°ê³¼ ì¶œë ¥
    let resultText = 'ì¢…í•©:\n';
    resultText += `ì„­ì™¸ìë³´ìœ : ${ì¢…í•©['ì„­ì™¸ìë³´ìœ ']}, ë‹¹ì¼ì°¾ê¸°: ${ì¢…í•©['ë‹¹ì¼ì°¾ê¸°']}, ë‹¹ì¼ì„­ì™¸: ${ì¢…í•©['ë‹¹ì¼ì„­ì™¸']}, ë‹¹ì¼ë§Œë‚¨: ${ì¢…í•©['ë‹¹ì¼ë§Œë‚¨']}, ë‹¨ê³„í–¥ìƒ: ${ì¢…í•©['ë‹¨ê³„í–¥ìƒ']}, ìƒë‹´: ${ì¢…í•©['ìƒë‹´']}, ë§ì”€: ${ì¢…í•©['ë§ì”€']}, ì„¼í„°: ${ì¢…í•©['ì„¼í„°']}\n\n`;

    if(ì¤‘ë³µì˜¤ë¥˜.length>0){
        resultText += 'âš ï¸ ì¤‘ë³µ ì˜¤ë¥˜:\n' + ì¤‘ë³µì˜¤ë¥˜.join('\n') + '\n';
    } else {
        resultText += 'ì¤‘ë³µ ì˜¤ë¥˜ ì—†ìŒ âœ…\n';
    }

    output.textContent = resultText;
}
</script>

</body>
</html>
